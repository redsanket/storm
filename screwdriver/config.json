{
    "version": 2,
    "shared": {
        "notification_email": "storm-devel@yahoo-inc.com"
    },
    "jobs": {
        "component": {  
            "test_results_type": "junit",
            "coverage_type": "none",
            "build" : {
                "test": {
                    "after": [
                        "mkdir -p $TEST_RESULTS_DIR/storm-core",
                        "mkdir -p $TEST_RESULTS_DIR/storm-yahoo",
                        "mkdir -p $TEST_RESULTS_DIR/storm-starter",
                        "mkdir -p $TEST_RESULTS_DIR/storm-kafka",
                        "cp $SRC_DIR/storm-core/target/test-reports/*.xml $TEST_RESULTS_DIR",
                        "cp $SRC_DIR/storm-core/target/surefire-reports/*.xml $TEST_RESULTS_DIR/storm-core",
                        "cp $SRC_DIR/storm-yahoo/target/surefire-reports/*.xml $TEST_RESULTS_DIR/storm-yahoo",
                        "cp $SRC_DIR/examples/storm-starter/target/surefire-reports/*.xml $TEST_RESULTS_DIR/storm-starter",
                        "cp $SRC_DIR/external/storm-kafka/target/surefire-reports/*.xml $TEST_RESULTS_DIR/storm-kafka"
                    ]
                },
                "publish" : {
                    "task": "dist-install",
                    "branch": "quarantine",
                    "dist_tag": "ystorm_master_security",
                    "required": true,
                    "group": "hadoopqa",
                    "type": "release",
		    "before" : [
			"mvn versions:set -Dnewversion=`cat $SRC_DIR/yahoo-build/RELEASE`",
			"mvn versions:update-child-modules",
			"find . -name pom.xml | xargs git update-index --assume unchanged"
		    ],
                    "yicf": [
                        "yahoo-build/ystorm.yicf"
                    ],
		    "after" : [
			"mvn versions:revert",
			"mvn versions:update-child-modules",
			"git tag -f -a `cat $SRC_DIR/yahoo-build/RELEASE` -m \"yahoo version `cat $SRC_DIR/yahoo-build/RELEASE`\"",
			"git push origin `cat $SRC_DIR/yahoo-build/RELEASE`"
		    ]
                }
            }
        }
    }
}
